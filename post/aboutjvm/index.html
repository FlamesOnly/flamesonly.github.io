<!DOCTYPE html>
<html class='theme-container'>

<head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    

    <title>JVM基础</title>

    <link rel="canonical" href="http://flamesonly.github.io/">

    
    <link rel='stylesheet' type='text/css' href='/css/common.min.2e0fcb1a7000d167fb8edc8795fd7fa375f12491a92c7e9c4e7cbaabf45d4c90.css'/>
    
    <link rel='stylesheet' media='screen and (min-width: 1201px)' type='text/css'
          href='/css/normal.min.c46acb505230270efd7c6e141090cb0d8929be27c04e426816632c376c4c49ea.css'/>
    
    <link rel='stylesheet' media='screen and (max-width: 1200px)' type='text/css'
          href='/css/small.min.cff497b4416dfb7de7e24706a8a25fc3efb8dfd2f8627449c114a139a67da2a7.css'/>

    
    <link rel='stylesheet' type='text/css' href='/css/androidstudio.min.min.c0869a17349d3f1bdd078763e8c11ec9808c9f38239bb254720577662fba87bf.css'/>
    
    <script src="/js/highlight.min.min.527b2c4dd19de47518d2a0fbbf849f2cf1230a7e6e40ee0f416f4de8f8539fbf.js"></script>

    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<script>
    hljs.highlightAll();
</script>
<body>

<div class="top">
    <a href="/">
        <img src="/img/logo.png"/>
    </a>
    <nav>
        
        <a href="/post/">
            Blog
        </a>
        
        <a href="/note/">
            Note
        </a>
        
        <a href="/projects/">
            Projects
        </a>
        
        <a href="/about">
            About
        </a>
        
    </nav>
</div>

<div id="center" class='center' >
    
<header class="center_head">
    <h1>
    JVM基础
</h1>
<div style="text-align: center;opacity: 0.5;margin-top: 0.5em;">
    2023.04.24 19:18
</div>
</header>

    
<div class="center_main">
    <a href="../" class="center_main_contents_left">
        <h1>My Blog</h1>
    </a>
    <style>
    .content_post h2::before {
        content: "※ ";
    }

    .content_post h3::before {
        content: "✧ ";
    }
</style>
<article class="content_post heti heti--ancient">
    <p>全称是 Java Virtual Machine，即我们常说的Java虚拟机，本质上也是一种软件，不同的操作系统需要适配不同的安装包，但JVM的最终功能都是能够执行字节码，<strong>这就是JVM能够跨平台的本质。</strong></p>
<h2 id="1字节码与jvm">1、字节码与JVM</h2>
<p>Java代码通过编译阶段转换成字节码格式的文件（hello.java &ndash;&gt; hello.class），字节码再去到JVM里面运行，看似是字节码体现出了跨平台的特性，本质上还是不同的操作系统上有自己适配的JVM。</p>
<h2 id="2jvm整体结构">2、JVM整体结构</h2>
<p>这个结构可以通过一个Java代码文件从程序员编写到被编译成计算机能够执行的机器指令的完整过程来辅助进行理解。</p>
<ul>
<li>程序员编写Java代码，得到一个java文件（hello.java）</li>
<li>编译器将其编译为字节码文件 hello.java &ndash;&gt; hello.class（这个文件是在磁盘中）</li>
<li>hello.class 进入类加载子系统，这一步就是把磁盘中的.class文件加载到内存中去</li>
<li>类加载子系统将字节码指令放到JVM内存区域中的方法区</li>
<li>JVM中的执行引擎（解释器）去执行内存中的字节码指令，JVM中的垃圾回收器也在执行引擎里。解释器实际上就是把字节码指令翻译成为机器指令，与此同时，字节码指令中有一些热点指令（高频出现），为了提高效率，执行引擎中的JIT编译器会去编译处理这些热点指令，并将其缓存，避免解释器去重复解释热点指令，影响效率。</li>
<li>执行指令的过程中，会产生一些Java对象，而这些对象就存在堆内存中。</li>
<li>执行字节码指令的过程本质上就是在执行Java的方法，执行的时候会在Java栈里创建一个栈帧，方法里的一些局部变量等就存在这个栈帧里面。</li>
<li>线程也可能会执行一些Native方法（JVM里面用C语言或C++编写的方法）。</li>
<li>执行指令过程中可能会不停地切换线程，程序计数器会记录当前程序下一条指令执行的地址，方便进行切换。同样是线程私有的。</li>
</ul>
<h2 id="类加载子系统">类加载子系统</h2>
<p>它负责把字节码文件（.class）加载到方法区里的内存空间中。</p>
<h2 id="类加载过程">类加载过程</h2>
<p>主要有三个步骤：</p>
<ol>
<li>加载</li>
<li>链接</li>
</ol>
<ul>
<li>验证：主要验证字节码文件是否正确，确保不会威胁到JVM的安全，比如文件格式等</li>
<li>准备：在堆里面去给一些statci的变量或者属性分配内存，并且赋值（注意这里<strong>是赋0值</strong>，也就是默认值，比如定义一个 static int a = 1, 那么在这个阶段是先给a 赋值为 0；又比如定义一个static boolean flag = true，在这个阶段先赋值为false）</li>
<li>解析：这一步是把符号引用解析为直接引用。比如，字节码指令中引用了一些java对象，在java代码中是通过这个对象的全限名去找的，等于只是通过名字（符号）去找对象，这一步就是要把符号引用变成直接引用，也就是直接<strong>去找这个对象在JVM里面的地址。</strong></li>
</ul>
<ol start="3">
<li>初始化：给类里面static的属性或者变量赋值（执行Java里面写的代码了）</li>
</ol>
<h3 id="类加载器分类">类加载器分类</h3>
<p>既可以按照引导类加载器和自定义类加载器分成两大类，也可以按照默认和真正的自定义类加载器分成四种类型。</p>
<p>这里主要讲JDK默认提供的三种加载器：</p>
<ol>
<li>BootStrapClassLoader：引导类加载器，加载的目录是jre/lib下面的目录</li>
<li>ExtClassLoader：jre/lib/ext</li>
<li>AppClassLoader：当前项目指定的classpath下，target/classes里面的类</li>
</ol>
<h3 id="双亲委派机制">双亲委派机制</h3>
<ol>
<li>避免类的重复加载</li>
<li>防止核心API被篡改</li>
</ol>
<p>当ClassLoader想要去加载一个类的时候，会去调用一个叫做loadClass的方法，那么在这个方法里面，会有一段代码先检查当前这个类加载器的parent属性是否为空，如果不为空，就让parent去加载这个类。</p>
<p>举个例子：</p>
<p>当AppClassLoader调用loadClass方法加载某个类，进入方法发现parent属性不为空，那么就进入ExtClassLoader执行loadClass，此时ExtClassLoader的parent属性虽然为空，但不代表它就会直接自行加载这个类，因为 c = findBootStrapOrNull，虽然它没有parent属性，但是事实上有这个找双亲继续加载的功能。</p>
<p>如果最上层的BootStrap加载不到，它就返给Ext，如果Ext也加载不到，就返给APP。</p>
<p>总结来说，就是当这个子类加载器需要加载一个类时，它会优先让父类加载器去加载，父类加载不到它再自己加载，保证类的唯一性。</p>
<h3 id="tomcat为什么要自定义类加载器webappclassloader">Tomcat为什么要自定义类加载器（WebappClassLoader）</h3>
<p><strong>实现类加载的隔离</strong></p>
<h2 id="jvm运行时数据区">JVM运行时数据区</h2>
<p>分为五块区域：</p>
<ol>
<li>
<p>方法区：经过类加载子系统处理过后的类信息就存在这里，除此以外这里还有常量池和一些方法信息。所有线程共享。</p>
</li>
<li>
<p>堆内存：程序执行过程中会产生很多对象，这些对象都存在这里。细分有新生代和老年代，默认比例是1:2，新生代中又有eden区、from区和to区。这里也是所有线程共享。</p>
</li>
<li>
<p>Java方法栈：里面是无数个栈帧，每一个栈帧里面又有局部变量表、动态链接、操作数栈、方法返回地址等。这里是线程私有的，也就是每一个线程有自己一块Java方法栈区域。</p>
</li>
<li>
<p>Native方法栈： JVM里面的一些用C或者C++写的本地方法。也是线程私有。</p>
</li>
<li>
<p>程序计数器：最简单的一块区域。它用来记录当前线程的下一条指令的执行地址。JVM规范中唯一一个没有OutOfMemoryError的一个区域。（前面提及的解释器，就是通过它来获取下一条字节码指令的地址）</p>
</li>
</ol>
<h3 id="java方法栈">Java方法栈</h3>
<p>首先，虚拟机栈是线程私有的，创建一个线程，这个线程就有一个自己的虚拟机栈。</p>
<ol>
<li>在线程执行的过程中，实际上就是在调用一个又一个的Java方法，每一个方法被调用的时候，就会在这个线程的虚拟机栈里生成一个栈帧。如果这个方法又调用了另一个方法，那么虚拟机栈里面就会继续生成栈帧。</li>
<li>虚拟机栈里面是不需要进行垃圾回收操作的，因为当一个方法执行完毕后，栈帧会自动出栈。与此同时，虚拟机栈会出现StackOverflow，最常见的一个情况就是递归方法没有写好终止条件，一直在不停地创建新的栈帧，最后导致栈内存溢出。</li>
<li>除了StackOverflow，也可能会出现OutOfMemoryError。两者的区别在于，栈内存溢出是某个线程的虚拟机栈内存不够，而OOM是因为线程数量过多，导致在线程创建时没有足够的内存空间给它创建虚拟机栈。</li>
<li>可以通过调整参数来设置虚拟机栈的大小，-Xss</li>
</ol>
<h3 id="栈帧java栈和本地方法栈都有栈帧">栈帧（Java栈和本地方法栈都有栈帧）</h3>
<p>栈帧里面会有局部变量表、操作数栈、方法返回地址、动态链接。</p>
<ul>
<li>局部变量表里面又有很多Slot，记录每个局部变量在表中的位置。局部变量表本身就是记录每个变量的值是什么。</li>
<li>操作数栈就是在执行字节码指令时，辅助进行计算的一个东西</li>
</ul>
<h3 id="堆区">堆区</h3>
<p>JVM规定所有对象和数组都存在堆里，调用方法时会产生的栈帧（如上上述）里面实际上存的是对象在堆里面的地址，而不是真正的对象，所以当栈帧消失的时候，对象并不会消失。对象只会被垃圾回收器回收。</p>
<p>同样可以通过设置参数调整大小：</p>
<p>-Xms：（memory start） 堆内存的初始大小</p>
<p>-Xmx：（memory max）堆内存的最大内存大小</p>
<p>但通常会把这两个参数设置为一样的，因为这样在垃圾回收之后不需要再去修改堆内存的大小，节约资源提高效率。</p>
<p>但默认情况下，初始大小是物理内存的1/64，最大内存是物理内存的1/4。</p>
<h4 id="新生代老年代">新生代&amp;老年代</h4>
<p>堆内存大小确认之后，里面划分为新生代区和老年代区，且默认比例是1:2，老年代所占空间更大。这个比例一般不调整，但如果需要调整的话可以通过 - XX: NewRatio 这个参数来调整。</p>
<p>新生代中又划分了Eden区、S0区和S1区（from区和to区），默认比例为8:1:1。（同样可以通过-XX：SurvivorRatio 这个参数来调整）。</p>
<p>Minor GC（YOUNG GC）以及对象如何进入老年代的过程梳理：</p>
<p>当一个对象被新创建时，它会进入Eden区，随着对象越来越多，Eden区的内存空间不足，就会触发Minor GC，此时Eden区中已经死亡的对象将会被回收，尚且存活的对象就会进入S0（From）区，并且会带上标记（记录经历了几次Minor GC），这是第一次Minor GC的过程。第二次GC开始会同时对新生代里所有区域进行检查并GC，还存活的对象就会被放入另一个S区，并且每经历一次Minor GC，年龄+1。（From 和 To 总是在交替工作，总有一个被清空）</p>
<p>直到一个对象的年龄到了阈值（默认为15），就会在最后一次Minor GC的时候被转入老年代。</p>
<p>还有一些对象直接进入老年代的情况，比如一个存活对象可以存放在Eden区中，但是S区放不下，它在第一次Minor GC就会被转入老年代，而更大一些的、连整个Eden区都放不下的对象，从创建开始就会被放在老年区。</p>
<h4 id="minor-gcmajor-gcfull-gc区别">Minor GC&amp;Major GC&amp;Full GC区别</h4>
<p>Minor：对新生代进行回收</p>
<p>Major：对老年代进行回收</p>
<p>Full：整个堆回收</p>
<p>现有的垃圾回收器普遍有针对新生代单独回收的机制，但是只在整堆回收的时候处理老年代。而CMS回收器，是唯一一个有对老年代进行单独回收处理机制的垃圾回收器。</p>
<h4 id="垃圾回收的过程">垃圾回收的过程</h4>
<ol>
<li>
<p>标记阶段：引用计数法或者可达性分析法。</p>
<p>引用计数法：单独用一个计数器记录这个对象被引用的次数，当计数为0，说明它是垃圾对象。</p>
<p>缺点：需要单独开辟一个空间给它计数；无法解决循环引用的问题，有些对象永远无法被回收。所以这个方法不常用。</p>
<p><strong>可达性分析法：</strong></p>
<p>根据GC Roots去一层一层地找被引用的对象，最终没有被找到的对象说明没有被任何一个GC Root 引用，就是垃圾对象。</p>
<p>GC Roots是一组引用，常用的比如Java栈和本地方法栈的栈帧中的局部变量、方法区中某个类里面的静态属性引用的对象、或者常量属性的引用对象。</p>
</li>
<li>
<p>回收算法：</p>
<ul>
<li>标记清除法</li>
<li>标记整理法</li>
<li>复制法 ： 通常用在新生代里。因为这里垃圾对象多，可达对象少，复制成本低。而且复制后引用地址发生了改变，栈帧里面也需要修改。</li>
</ul>
</li>
<li>
<p>三种算法的对比：</p>
<table>
<thead>
<tr>
<th></th>
<th>标记清除</th>
<th>标记整理</th>
<th>复制算法</th>
</tr>
</thead>
<tbody>
<tr>
<td>速度</td>
<td>适中</td>
<td>最慢</td>
<td>最快</td>
</tr>
<tr>
<td>空间开销</td>
<td>少，原地回收</td>
<td>少，</td>
<td>多，每次只能用一半的空间</td>
</tr>
<tr>
<td>是否涉及地址修改</td>
<td>否，原地回收</td>
<td>是，整理的时候换了位置</td>
<td>是，整个被复制到另一块空间</td>
</tr>
</tbody>
</table>
</li>
</ol>
<h4 id="常见的垃圾回收器">常见的垃圾回收器</h4>
<ul>
<li>CMS垃圾回收器：</li>
</ul>
<p>针对老年代，采用标记清除算法，特点是低暂停。</p>
<p>工作步骤：</p>
<ol>
<li>初始标记 Stop the world，它只找到GC Root 直接引用的那个可达对象，就结束这个标记阶段，所以这一步暂停的时间很短。</li>
<li>并发标记：这个阶段是垃圾回收线程和用户的线程可以同时工作，所以对于用户来说体验优化了，但缺点就是吞吐量变低。这也是最费时间的一个过程。</li>
<li>重新标记：由于上一个阶段，垃圾回收和用户线程是并发进行的，所以有可能在并发标记的过程中产生了新的垃圾对象，或者新的可达对象。所以这一步进行STW，修正这种误差。</li>
<li>并发清理：不会暂停用户线程，垃圾回收线程和用户同时工作。</li>
<li>并发重置：重置标记。</li>
</ol>
<p>但存在一些问题：</p>
<p><strong>问题1:</strong> 并发标记和并发清理阶段，垃圾回收线程和用户线程在同时工作，所以也可能在此时会有新的对象要进入老年代，但是内存空间不足，此时就会导致“concurrent mode failure”，所以此时会用Serial Old来做一次垃圾收集，造成全局的STW。</p>
<p><strong>问题2:</strong>  而且在并发清理阶段可能会产生新的垃圾，这些垃圾就无法在本次GC中处理了，只能留到下一次。</p>
<p><strong>问题3:</strong>  由于是基于标记清除法的垃圾回收器，所以还需要通过指定参数的方式，在完成垃圾回收后进行对象的整理，否则会产生大量内存碎片。</p>
<ul>
<li>G1 垃圾回收器：</li>
</ul>
<p>把整个堆分成2048个region，每一个region既可以是eden区，也可以是S区，也可以是old区，逻辑上与前面的分法无异，只是从物理空间上来讲可以是不连续的，eden区不一定非要挨着s区。</p>
<p>多了一个humongous区用于存储大对象（超过region大小的50%）；</p>
<p>工作步骤：</p>
<ol>
<li>Stop the world 进行初始标记</li>
<li>并发标记</li>
<li>最终标记 同样进行了一次 STW</li>
<li>筛选回收 这里也是STW 但注意，这里并不是全部回收，而是根据设定的、能够接受的STW时间（默认200ms），所以本质上是在控制能够接受的暂停时间。优先回收垃圾对象比较多的region，把存活对象复制到相邻的region里面去。</li>
</ol>
<p>G1 有一个特殊的<strong>Mixed GC：</strong></p>
<p>当老年代占用空间到达了一定百分比（可以通过-XX: InitiatingHeadOccupancyPercent来指定），那么就会触发Mixed GC，会回收所有的新生代区域，以及部分老年代区域（因为G1的筛选回收规定了时间，所以不一定会全部回收），还有大对象区（Humongous）；</p>

</article>

<div class="content_post_button">
    
    <button onclick="window.location.href = 'http:\/\/flamesonly.github.io\/post\/leetcode239\/'">
        <span style="color: var(--primary-color);">上一篇</span><br />Leetcode 239 滑动窗口最大值 单调队列方法解题思路
    </button>
    
    
</div>
<a class="back_top" href="javascript:window.scrollTo(0,0);">
    <svg t="1660722824713" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
        p-id="1359" width="64" height="64">
        <path
            d="M484 93.668c-231.038 0-418.333 187.296-418.333 418.335 0 231.038 187.296 418.327 418.333 418.327 231.036 0 418.333-187.289 418.333-418.327C902.334 280.964 715.036 93.668 484 93.668zM372.207 811.881c-0.412 8.174-4.906 12.669-13.493 13.493-6.545 0-11.863-0.614-15.946-1.841-4.504-1.639-6.545-4.906-6.133-9.813 1.629-4.906 4.695-7.148 9.199-6.746 6.948 1.639 10.215 0.613 9.813-3.066l0-96.902-12.266 0c-4.504-0.402-6.746-3.268-6.746-8.586 0.402-4.907 2.855-7.562 7.359-7.974l36.185 0c2.453 0 4.083 1.025 4.906 3.066 1.227-2.855 3.469-4.494 6.747-4.906l82.183 0c4.495 0.412 6.747 3.277 6.747 8.587-0.412 5.318-2.865 8.184-7.36 8.586l-36.798 0-2.453 11.652 23.919 0c10.215-0.402 14.92 3.891 14.106 12.88l0 63.17c-0.412 4.504-3.277 6.957-8.586 7.36-5.318-0.403-8.184-2.856-8.586-7.36l0-57.037c0-1.227-0.613-1.84-1.84-1.84l-43.545 0c-0.824 0.412-1.438 1.025-1.84 1.84l0 55.811c-0.412 4.906-3.277 7.57-8.586 7.974-5.318-0.403-8.184-3.067-8.586-7.974l0-61.943c0-8.586 3.68-12.88 11.04-12.88l14.719 0 3.066-11.652-25.759 0c-2.453 0-5.117-1.016-7.973-3.066-1.227 2.865-3.479 4.293-6.746 4.293l-6.747 0L372.207 811.881zM479.536 824.146c-3.277 4.907-7.571 5.722-12.879 2.454-2.865-1.227-7.571-3.891-14.106-7.974-6.133-3.277-10.838-5.52-14.106-6.746-6.133-2.855-8.586-6.334-7.359-10.426-1.227 2.051-3.68 4.504-7.36 7.359-0.412 0.412-0.824 0.824-1.227 1.227-9.41 7.762-20.239 13.896-32.505 18.399-5.73 1.629-9.813 0.201-12.266-4.294-1.639-4.906 0-8.586 4.906-11.039 18.802-7.762 30.253-15.534 34.345-23.306 4.494-7.359 6.746-21.054 6.746-41.091 0.403-5.722 3.067-8.788 7.973-9.2 5.309 0.412 8.174 3.479 8.586 9.2 0.814 20.852-1.639 36.798-7.36 47.837 4.083-4.906 9.401-5.107 15.946-0.613 4.907 2.865 11.442 6.546 19.626 11.04 3.68 2.453 6.334 4.092 7.973 4.906C481.375 814.736 482.391 818.828 479.536 824.146zM556.198 822.307l-41.704 0c-7.772-0.412-11.864-3.891-12.267-10.426l0-34.345c-0.412-8.989 3.68-13.282 12.267-12.88l42.931 0c7.763-0.402 11.653 3.891 11.653 12.88l0 34.958C569.48 819.029 565.188 822.307 556.198 822.307zM614.462 817.4c-6.545 0-11.652-0.824-15.332-2.453-4.092-2.051-5.318-5.309-3.68-9.813 1.629-4.906 5.107-6.747 10.426-5.52 11.04 2.453 15.735-1.841 14.106-12.88-0.412-8.174-5.933-18.399-16.56-30.665-3.68-3.68-4.293-9.2-1.84-16.56 4.494-13.895 7.561-24.532 9.199-31.892l-16.559 0c-1.227 0-2.051 0.824-2.453 2.453l0 110.395c-0.412 5.31-3.067 8.175-7.974 8.587-5.318-0.412-8.184-3.277-8.586-8.587l0-65.01c-1.227 1.639-2.865 2.453-4.906 2.453l-69.304 0c-4.504-0.402-6.957-3.268-7.359-8.586 0.402-5.31 2.855-8.175 7.359-8.587l14.72 0c-0.824-0.814-3.68-5.721-8.586-14.719-2.051-5.31-0.613-8.989 4.293-11.04l-7.36 0c-4.504-0.402-6.957-3.268-7.359-8.586 0.402-5.309 2.855-8.174 7.359-8.586l22.079 0c-0.824-1.227-1.227-2.453-1.227-3.681-1.227-4.082 0.613-7.359 5.52-9.813 5.721-2.041 9.401-1.016 11.04 3.066 1.227 3.68 2.654 7.158 4.293 10.427l20.239 0c4.494 0.412 6.947 3.277 7.359 8.586-0.412 5.318-2.865 8.184-7.359 8.586l-47.225 0c2.855 1.639 6.334 7.36 10.426 17.173 1.227 4.092 0.814 6.957-1.227 8.586l13.493 0c0.402-1.227 1.016-2.855 1.84-4.906 2.453-6.133 4.082-11.039 4.906-14.72 1.629-4.082 5.107-5.721 10.426-4.906 4.906 2.051 6.747 5.318 5.521 9.813-0.824 2.051-1.639 4.504-2.454 7.359-1.227 3.277-2.252 5.932-3.066 7.973l11.04 0c2.453 0 4.082 0.613 4.906 1.84l0-41.704c0-8.175 3.066-12.056 9.199-11.653l36.799 0c9.4 0 13.08 5.117 11.039 15.333 0 0.412-1.025 3.891-3.066 10.426-3.277 10.226-5.52 17.786-6.746 22.692-1.227 3.68-1.84 6.344-1.84 7.973 0.402 1.228 1.629 3.067 3.68 5.521 8.586 13.09 13.281 25.356 14.105 36.798C638.17 807.387 630.408 816.988 614.462 817.4zM646.896 466.315c-7.488 7.449-18.815 7.642-25.649 0.806-0.538-0.537-1.074-0.922-1.536-1.535L502.752 348.858l-0.192 280.106c0 9.139-8.601 16.549-19.198 16.549-10.598 0-18.738-7.41-18.738-16.549 0-0.729-0.115-1.306 0-2.034l-0.192-278.072L347.513 465.586c-0.422 0.652-0.959 0.999-1.536 1.535-6.834 6.874-18.162 6.681-25.649-0.806-7.488-7.488-8.025-19.122-1.152-25.995L467.12 292.03c2.112-3.263 5.26-5.913 9.369-7.333 2.074-0.807 4.262-1.152 6.528-1.113 0.23 0 0.383-0.116 0.614-0.116 0.153 0 0.307 0.078 0.46 0.078 2.304-0.078 4.57 0.307 6.72 1.152 3.994 1.421 7.142 4.07 9.254 7.219L648.048 440.32C654.92 447.155 654.383 458.827 646.896 466.315zM636.605 238.121 331.771 238.121c-9.407 0-17.049-7.564-17.049-16.857 0-9.292 7.642-16.856 17.049-16.856l304.835 0c9.445 0 17.048 7.564 17.048 16.856C653.653 230.557 646.013 238.121 636.605 238.121zM549.452 781.829 521.24 781.829c-1.227 0-2.051 0.824-2.453 2.453l0 19.013c0.402 1.639 1.227 2.453 2.453 2.453l28.212 0c1.629-0.402 2.453-1.227 2.453-2.453l0-19.013C551.905 782.653 551.081 781.829 549.452 781.829z"
            p-id="1360" fill="#343232"></path>
    </svg>
</a>


    <div class="center_main_contents_title">
    <h2>目录</h2>
</div>
<div class="center_main_contents_main">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#1字节码与jvm">1、字节码与JVM</a></li>
    <li><a href="#2jvm整体结构">2、JVM整体结构</a></li>
    <li><a href="#类加载子系统">类加载子系统</a></li>
    <li><a href="#类加载过程">类加载过程</a>
      <ul>
        <li><a href="#类加载器分类">类加载器分类</a></li>
        <li><a href="#双亲委派机制">双亲委派机制</a></li>
        <li><a href="#tomcat为什么要自定义类加载器webappclassloader">Tomcat为什么要自定义类加载器（WebappClassLoader）</a></li>
      </ul>
    </li>
    <li><a href="#jvm运行时数据区">JVM运行时数据区</a>
      <ul>
        <li><a href="#java方法栈">Java方法栈</a></li>
        <li><a href="#栈帧java栈和本地方法栈都有栈帧">栈帧（Java栈和本地方法栈都有栈帧）</a></li>
        <li><a href="#堆区">堆区</a></li>
      </ul>
    </li>
  </ul>
</nav>
</div>
</div>

</div>
</body>





</html>